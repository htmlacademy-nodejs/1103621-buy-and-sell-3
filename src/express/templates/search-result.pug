extends layout.pug 

block content 
  main.page-content
  section.search-results
    h1.visually-hidden Результаты поиска
    .search-results__wrapper
      if offers.length > 0
        p.search-results__label
          | Найдено 
          span.js-results #{offers.length} публикации
        ul.search-results__list
          each offer, i in offers
            li.tickets-list__item
              div(class=`ticket-card ticket-card--color0${i}`)
                .ticket-card__img
                  img(src=`/img/${offer.picture}`, srcset=`/img/${offer.picture}`, alt='Изображение товара')
                .ticket-card__info
                  span.ticket-card__label
                    | #{offer.type.name}
                  .ticket-card__categories
                    - var categories = [];
                    each category in offer.categories 
                      - categories.push(category.name)
                    a(href='#') #{categories.join(`, `)} 
                  .ticket-card__header
                    h3.ticket-card__title
                      a(href=`/offers/${offer.id}`) #{offer.title}
                    p.ticket-card__price
                      span.js-sum #{offer.price} ₽
                  .ticket-card__desc
                    p #{offer.descr}
      else 
        .search-results__message
          p
            | Не найдено 
            br
            | ни одной публикации       
  section.tickets-list
    h2.visually-hidden Самые новые предложения
    .tickets-list__wrapper
      .tickets-list__header
        p.tickets-list__title Самое свежее
        a.tickets-list__link(href='#') Еще 25
      ul
        each offer, i in offersForTheNewest
          li.tickets-list__item
            div(class=`ticket-card ticket-card--color0${i}`)
              .ticket-card__img
                img(src=`/img/${offer.picture}`, srcset=`/img/${offer.picture}`, alt='Изображение товара')
              .ticket-card__info
                span.ticket-card__label
                  | #{offer.type.name}
                .ticket-card__categories
                  - var categories = [];
                  each category in offer.categories 
                    - categories.push(category.name)
                  a(href='#') #{categories.join(`, `)} 
                .ticket-card__header
                  h3.ticket-card__title
                    a(href=`/offers/${offer.id}`) #{offer.title}
                  p.ticket-card__price
                    span.js-sum #{offer.price} ₽
                .ticket-card__desc
                  p #{offer.descr}